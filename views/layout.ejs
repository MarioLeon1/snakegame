<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tamagotchi MVC</title>
    <link rel="stylesheet" href="/css/styles.css">
</head>
<body>
    <header>
        UCJC GAMES | <a href="/characters">GESTIÓN DE PERSONAJES</a> <a href="/game/select">CAMBIAR PERSONAJE</a> <a href="/game">JUGAR</a>

        <div class="overlay-container" style="display:inline-block; padding: 10px; margin-left: 20px;">
            <% if (typeof user !== 'undefined') { %>
                <!-- Nombre de usuario en mayúsculas con confirmación de logout -->
                <a href="#" id="logout-link"><%= user.username.toUpperCase() %></a>
                <form id="logout-form" action="/logout" method="GET" style="display: none;"></form>
            <% } else { %>
                <!-- Botón de login si no hay sesión -->
                <a href="/login">LOGIN</a>
            <% } %>
        </div>
    </header>

    <%- body %>

    <!-- Enlace a jQuery y Bootstrap -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        // Confirmación para cerrar sesión
        const logoutLink = document.getElementById('logout-link');
        const logoutForm = document.getElementById('logout-form');

        if (logoutLink) {
            logoutLink.addEventListener('click', function (e) {
                e.preventDefault(); // Evitar la acción por defecto del enlace
                const confirmed = confirm("¿Está seguro de que quiere cerrar sesión?");
                if (confirmed) {
                    logoutForm.submit(); // Si confirma, enviar el formulario de logout
                }
            });
        }
    </script>
</body>
</html>
